var FloEvent=function(){this.handlers={}};FloEvent.prototype={subscribe:function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t)},unsubscribe:function(e,t){this.handlers[e]=this.handlers[e].filter(function(e){if(e!==t)return e})},fire:function(e,t){return void 0===this.handlers[e]?(console.error("FloEvent not found with name: "+e),!1):(this.handlers[e].forEach(function(e){e.call(this,t)}),!0)}};var FloDialog=function(e){this.id=Date.now(),this.cloak=this.renderCloakHtml(),this.activeDialog=null,this.config=this.mergeConfig({cache:!0,fade:!1,footerText:""},e),this.bindTriggers()};FloDialog.prototype.mergeConfig=function(e,t){var o={};for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);return o},FloDialog.prototype.bindTriggers=function(){for(var e=document.getElementsByClassName("flo-dialog-t"),t=0;t<e.length;t++)this.addEvent(e[t],"click",function(e){var t=e.currentTarget?e.currentTarget:e.srcElement,o=t.getAttribute("data-title"),i=t.getAttribute("href"),n="";t.getAttribute("data-flo-dialog-element-id")&&(n=document.getElementById(t.getAttribute("data-flo-dialog-element-id")).innerHTML),null!==i&&""!==i&&"javascript:"!==i&&"#"!==i&&(e.preventDefault(),n="Loading...",this.loadContentFromUrl(i)),this.openDialog(this.renderContainerHtml(n)),this.setTitle(o)}.bind(this),!1)},FloDialog.prototype.setHeight=function(e,t){void 0!==e&&e.getElementsByClassName("dialog__body")[0].setAttribute("style","height:"+t+"px; overflow-y: scroll")},FloDialog.prototype.openDialog=function(e){if(document.getElementsByTagName("body")[0].appendChild(e),this.initCloseTriggers(e),void 0!==e){this.activeDialog=e,this.openCloak();var t=(window.pageYOffset||document.body.scrollTop)-(document.body.clientTop||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0);e.className=e.className.replace(/\bhide\b/,""),e.setAttribute("style","top:"+(t+o/2-e.offsetHeight/2)+"px")}},FloDialog.prototype.initCloseTriggers=function(e){for(var t=e.getElementsByClassName("flo-dialog--close"),o=0;o<t.length;o++)this.addEvent(t[o],"click",function(){this.closeDialog(this.activeDialog)}.bind(this),!1);void 0!==this.cloak&&this.addEvent(this.cloak,"click",function(e){e.target!==this.activeDialog&&this.closeDialog(this.activeDialog)}.bind(this),!1)},FloDialog.prototype.closeDialog=function(e){void 0!==e&&(this.config.cache?-1===e.className.indexOf("hide")&&(e.className+=" hide"):e.parentNode.removeChild(e),this.closeCloak())},FloDialog.prototype.openCloak=function(){var e=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);void 0!==this.cloak&&(this.cloak.setAttribute("style","height: "+e+"px"),this.cloak.className=this.cloak.className.replace(/\bhide\b/g,""))},FloDialog.prototype.closeCloak=function(){void 0!==this.cloak&&-1===this.cloak.className.indexOf("hide")&&(this.cloak.className+=" hide")},FloDialog.prototype.setTitle=function(e){if(void 0!==this.activeDialog){var t;void 0!==(t=this.activeDialog.getElementsByClassName("flo-dialog__header")[0])&&(t.getElementsByClassName("title")[0].innerHTML=e)}},FloDialog.prototype.clearContainer=function(e){e.innerHTML=""},FloDialog.prototype.addEvent=function(e,t,o){e.attachEvent?(e["e"+t+o]=o,e[t+o]=function(){e["e"+t+o](window.event)},e.attachEvent("on"+t,e[t+o])):e.addEventListener(t,o,!1)},FloDialog.prototype.setYOffset=function(e){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this.activeDialog.setAttribute("style","top:"+(e+t/2-this.activeDialog.offsetHeight/2)+"px")},FloDialog.prototype.loadContentFromUrl=function(e){this.get(e,function(e){setTimeout(function(){this.addElementToActiveDialogContent(e.data)}.bind(this),2e3)}.bind(this))},FloDialog.prototype.get=function(e,t){var o=new XMLHttpRequest,i={};o.open("GET",e),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onload=function(){200===o.status?(i.data=o.responseText,t(i)):console.error("Request failed.  Returned status of "+o.status)},o.send()},FloDialog.prototype.addElementToActiveDialogContent=function(e){this.activeDialog.getElementsByClassName("flo-dialog__body")[0].innerHTML=e},FloDialog.prototype.renderCloakHtml=function(){var e=document.createElement("div"),t=document.getElementsByTagName("body")[0];return e.className="flo-dialog-cloak hide",t.insertBefore(e,t.firstChild),e},FloDialog.prototype.renderContainerHtml=function(e){var t=document.createElement("div"),o=document.createElement("header"),i=document.createElement("div"),n=document.createElement("footer"),a=document.createElement("div"),l=document.createElement("div"),s=document.createElement("h2"),r=document.createElement("a");return t.id="flo-dialog-"+this.id,t.className="flo-dialog hide",o.className="flo-dialog__header trailer--half",t.appendChild(o),a.className="container container--master",o.appendChild(a),s.className="title title--section gutters--double",s.innerHTML="No title was set!",a.appendChild(s),l.className="container container--slave",l.style="text-align: right",o.appendChild(l),r.href="JavaScript:;",r.className="flo-dialog--close gutters--double fa fa-times",r.innerHTML="x",l.appendChild(r),i.className="flo-dialog__body gutters--double",i.innerHTML="This is a example dialog. Loaded from HTML.",void 0!==e&&null!==e&&(i.innerHTML=e),t.appendChild(i),n.className="flo-dialog__footer gutters--double",n.innerHTML=""!==this.config.footerText?this.config.footerText:"&copy; FloDialog 2017. All rights reserved.",t.appendChild(n),t},FloDialog.prototype.setFooterText=function(e){this.config.footerText=e};